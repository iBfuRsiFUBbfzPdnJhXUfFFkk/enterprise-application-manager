{% extends "authenticated/base_authenticated.html" %}

{% block title %}Calendar{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="mb-6">
        <div class="flex justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-900">Calendar</h1>
            <div class="flex items-center space-x-2">
                <a href="{% url 'maintenance_window_new' %}" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow-sm transition-colors duration-200">
                    <svg class="w-5 h-5 inline-block mr-1 -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Add Maintenance
                </a>
                <a href="{% url 'meeting_new' %}" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-sm transition-colors duration-200">
                    <svg class="w-5 h-5 inline-block mr-1 -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Add Meeting
                </a>
            </div>
        </div>
        <p class="mt-2 text-sm text-gray-600">View and manage important dates including maintenance windows, releases, sprints, and IT requests.</p>
    </div>

    <!-- View Switcher and Filters -->
    <div class="bg-white shadow-sm rounded-lg p-4 mb-4">
        <div class="flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0">
            <!-- View Switcher -->
            <div class="flex space-x-2">
                <button id="view-month" class="view-btn px-4 py-2 rounded-lg bg-indigo-600 text-white font-medium" data-view="month">Month</button>
                <button id="view-week" class="view-btn px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 font-medium" data-view="week">Week</button>
                <button id="view-day" class="view-btn px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 font-medium" data-view="day">Day</button>
                <button id="view-agenda" class="view-btn px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 font-medium" data-view="agenda">Agenda</button>
            </div>

            <!-- Event Type Filters -->
            <div class="flex flex-wrap gap-3">
                <label class="inline-flex items-center">
                    <input type="checkbox" class="event-filter rounded text-red-600 focus:ring-red-500" data-type="maintenance" checked>
                    <span class="ml-2 text-sm text-gray-700">Maintenance</span>
                    <span class="ml-1 w-3 h-3 rounded-full bg-red-500"></span>
                </label>
                <label class="inline-flex items-center">
                    <input type="checkbox" class="event-filter rounded text-violet-600 focus:ring-violet-500" data-type="release" checked>
                    <span class="ml-2 text-sm text-gray-700">Releases</span>
                    <span class="ml-1 w-3 h-3 rounded-full bg-violet-500"></span>
                </label>
                <label class="inline-flex items-center">
                    <input type="checkbox" class="event-filter rounded text-emerald-600 focus:ring-emerald-500" data-type="sprint" checked>
                    <span class="ml-2 text-sm text-gray-700">Sprints</span>
                    <span class="ml-1 w-3 h-3 rounded-full bg-emerald-500"></span>
                </label>
                <label class="inline-flex items-center">
                    <input type="checkbox" class="event-filter rounded text-amber-600 focus:ring-amber-500" data-type="request" checked>
                    <span class="ml-2 text-sm text-gray-700">Requests</span>
                    <span class="ml-1 w-3 h-3 rounded-full bg-amber-500"></span>
                </label>
                <label class="inline-flex items-center">
                    <input type="checkbox" class="event-filter rounded text-blue-600 focus:ring-blue-500" data-type="meeting" checked>
                    <span class="ml-2 text-sm text-gray-700">Meetings</span>
                    <span class="ml-1 w-3 h-3 rounded-full bg-blue-500"></span>
                </label>
            </div>
        </div>
    </div>

    <!-- Date Navigation -->
    <div class="bg-white shadow-sm rounded-lg p-4 mb-4">
        <div class="flex justify-between items-center">
            <button id="prev-period" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors duration-200">
                <svg class="w-5 h-5 inline-block -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                Previous
            </button>
            <div class="text-center">
                <h2 id="current-period" class="text-xl font-bold text-gray-900">January 2026</h2>
            </div>
            <button id="today-btn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200">
                Today
            </button>
            <button id="next-period" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors duration-200">
                Next
                <svg class="w-5 h-5 inline-block -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Calendar Grid Container -->
    <div id="calendar-container" class="bg-white shadow-sm rounded-lg p-4">
        <div id="calendar-grid">
            <!-- Calendar will be rendered here by JavaScript -->
            <div class="flex items-center justify-center h-64 text-gray-500">
                <div class="text-center">
                    <svg class="w-12 h-12 mx-auto mb-4 text-gray-400 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                    <p>Loading calendar...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Include calendar JavaScript -->
<script src="/static/js/calendar.js"></script>
{% endblock %}
