{%extends 'authenticated/base_authenticated.html' %}
{%load templatetags_markdown %}
{%block content %}
<div class="bg-white shadow-sm border-b border-gray-200 mb-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <a href="{%url 'ai_use_case' %}" class="mr-4 text-gray-400 hover:text-gray-600">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </a>
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">{{ ai_use_case|default:"AI Use Case" }}</h1>
                </div>
            </div>
            <div class="flex gap-3">
                <a href="{%url 'ai_use_case_edit' model_id=ai_use_case.id %}"
                   class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-violet-600 hover:bg-violet-700">
                    Edit
                </a>
                <button onclick="confirmDelete()"
                        class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700">
                    Delete
                </button>
            </div>
        </div>
    </div>
</div>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
    <div class="space-y-6">
        <!-- Basic Information -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Basic Information</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">ID</dt>
                        <dd class="text-base text-gray-900 font-mono">{{ ai_use_case.id }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Name</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.name|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">AI Governance</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.ai_governance %}
                                <a href="{%url 'ai_governance_detail' model_id=ai_use_case.ai_governance.id %}" class="text-violet-600 hover:text-violet-800">{{ ai_use_case.ai_governance }}</a>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Client</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.client %}
                                <a href="{%url 'client_detail' model_id=ai_use_case.client.id %}" class="text-violet-600 hover:text-violet-800">{{ ai_use_case.client }}</a>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Currently Active</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.is_currently_active %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.is_currently_active == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Development Lifecycle Stage</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.development_lifecycle_stage|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Use Case Topic Area</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.use_case_topic_area|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Explanation</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.explanation|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Summary</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.summary|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Purpose</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.purpose|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Expected Benefit</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.expected_benefit|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Intended Purpose and Benefits</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.intended_purpose_and_benefits|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Comment</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.comment|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Technology Details -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Technology Details</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Uses Face Recognition/Capture</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.uses_face_recognition_or_capture %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">Yes</span>
                            {%elif ai_use_case.uses_face_recognition_or_capture == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">In Commercial AI Products List</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.is_in_commercial_ai_products_list %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Yes</span>
                            {%elif ai_use_case.is_in_commercial_ai_products_list == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">AI System Outputs Description</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.ai_system_outputs_description|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Data & Systems -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Data & Systems</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Data Description</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.data_description|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Data Sources</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.data_sources|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Data Sensitivity Level</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.data_sensitivity_level|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Personal Data Involved</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.personal_data_involved %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Yes</span>
                            {%elif ai_use_case.personal_data_involved == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Systems Description</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.systems_description|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Applications Involved</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.applications_involved.all %}
                                <ul class="list-disc list-inside">
                                    {%for app in ai_use_case.applications_involved.all %}
                                        <li><a href="{%url 'application_detail' model_id=app.id %}" class="text-violet-600 hover:text-violet-800">{{ app }}</a></li>
                                    {%endfor %}
                                </ul>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Databases Involved</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.databases_involved.all %}
                                <ul class="list-disc list-inside">
                                    {%for db in ai_use_case.databases_involved.all %}
                                        <li><a href="{%url 'database_detail' model_id=db.id %}" class="text-violet-600 hover:text-violet-800">{{ db }}</a></li>
                                    {%endfor %}
                                </ul>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Tools Involved</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.tools_involved.all %}
                                <ul class="list-disc list-inside">
                                    {%for tool in ai_use_case.tools_involved.all %}
                                        <li><a href="{%url 'tool_detail' model_id=tool.id %}" class="text-violet-600 hover:text-violet-800">{{ tool }}</a></li>
                                    {%endfor %}
                                </ul>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Data Protection & Security -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Data Protection & Security</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Data Protection Measures</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.data_protection_measures|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Encryption Used</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.encryption_used %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.encryption_used == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Access Controls</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.access_controls|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Training & Model Information -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Training & Model Information</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Data Used for AI Training</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.data_used_for_ai_training %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Yes</span>
                            {%elif ai_use_case.data_used_for_ai_training == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Training Data Opt-Out Available</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.training_data_opt_out_available %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.training_data_opt_out_available == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Model Version</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.model_version|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Has Model Training Data Documentation</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.has_model_training_data_documentation %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.has_model_training_data_documentation == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Agency-Owned Training Data Description</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.agency_owned_training_data_description|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Demographic Variables Used</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.demographic_variables_used|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Development & Code -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Development & Code</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Includes Custom-Developed Code</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.includes_custom_developed_code %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Yes</span>
                            {%elif ai_use_case.includes_custom_developed_code == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Agency Has Code Access</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.agency_has_code_access %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.agency_has_code_access == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Open Source Code URL</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.open_source_code_url %}
                                <a href="{{ ai_use_case.open_source_code_url }}" target="_blank" class="text-violet-600 hover:text-violet-800">{{ ai_use_case.open_source_code_url }}</a>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Developed Under Contract or In-House</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.developed_under_contract_or_inhouse|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Procurement Instrument Identifiers (PIID)</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.procurement_instrument_identifiers|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Authority to Operate (ATO) -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Authority to Operate (ATO)</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Has ATO for AI System</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.has_ato_for_ai_system %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.has_ato_for_ai_system == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">ATO System Name</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.ato_system_name|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Risk Management -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Risk Management</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Risk Level</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.risk_level|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Human Oversight Required</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.human_oversight_required %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.human_oversight_required == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Rights-Impacting</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.is_rights_impacting %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">Yes</span>
                            {%elif ai_use_case.is_rights_impacting == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Presumed Rights-Impacting Category</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.presumed_rights_impacting_category|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Safety-Impacting</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.is_safety_impacting %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">Yes</span>
                            {%elif ai_use_case.is_safety_impacting == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Presumed Safety-Impacting Category</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.presumed_safety_impacting_category|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Monitoring Approach</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.monitoring_approach|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">CAIO Determination Justification</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.caio_determination_justification|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Key Risks and Identification Method</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.key_risks_and_identification_method|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Dates -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Important Dates</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Date Initiated</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.date_initiated|date:"M d, Y"|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Date Development/Acquisition Began</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.date_development_or_acquisition_began|date:"M d, Y"|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Date Deployed</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.date_deployed|date:"M d, Y"|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Date Retired</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.date_retired|date:"M d, Y"|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- HISP & Public Services -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">HISP & Public-Facing Services</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Supports HISP Public-Facing Service</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.supports_hisp_public_facing_service %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Yes</span>
                            {%elif ai_use_case.supports_hisp_public_facing_service == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">HISP Supporting</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.hisp_supporting|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Public-Facing Service Supporting</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.public_facing_service_supporting|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Disseminates Info to Public</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.disseminates_info_to_public %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Yes</span>
                            {%elif ai_use_case.disseminates_info_to_public == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Information Quality Act Compliance Approach</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.info_quality_act_compliance_approach|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Privacy & PII -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Privacy & PII</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Involves PII Maintained by Client</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.involves_pii_maintained_by_client %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Yes</span>
                            {%elif ai_use_case.involves_pii_maintained_by_client == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">SAOP Assessed Privacy Risks</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.saop_assessed_privacy_risks %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.saop_assessed_privacy_risks == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Infrastructure & Resources -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Infrastructure & Resources</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Access to Enterprise Data Catalog</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.has_access_to_enterprise_data_catalog|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Wait Time for Developer Tools</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.wait_time_for_developer_tools|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">IT Infrastructure Provisioning Method</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.it_infrastructure_provisioning_method|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Computing Resources Request Process</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.has_computing_resources_request_process|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Is Provisioning Communication Timely</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.is_provisioning_communication_timely|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Data Science Tools Reuse Approach</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.data_science_tools_reuse_approach|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Review & Assessment -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Review & Assessment</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Info Made Available for Review</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.info_made_available_for_review %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.info_made_available_for_review == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Requested Extension for Risk Management</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.requested_extension_for_risk_management %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Yes</span>
                            {%elif ai_use_case.requested_extension_for_risk_management == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">AI Impact Assessment Conducted</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.ai_impact_assessment_conducted %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.ai_impact_assessment_conducted == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Tested in Operational Environment</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.tested_in_operational_environment %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.tested_in_operational_environment == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Independent Evaluation Conducted</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.independent_evaluation_conducted %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.independent_evaluation_conducted == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Has Post-Deployment Monitoring Process</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.has_post_deployment_monitoring_process %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Yes</span>
                            {%elif ai_use_case.has_post_deployment_monitoring_process == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Decision-Making & Human Involvement -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Decision-Making & Human Involvement</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">AI Can Act Without Human Involvement</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.can_ai_act_without_human_involvement %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Yes</span>
                            {%elif ai_use_case.can_ai_act_without_human_involvement == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">AI Use Notice Approach</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.ai_use_notice_approach|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Fairness & Equity -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Fairness & Equity</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Used for Decisions with Adverse Impact</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.is_used_for_decisions_with_adverse_impact %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">Yes</span>
                            {%elif ai_use_case.is_used_for_decisions_with_adverse_impact == False %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">No</span>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Disparities Detection & Mitigation Steps</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.disparities_detection_mitigation_steps|markdown|default:"—" }}</dd>
                    </div>
                    <div class="md:col-span-2">
                        <dt class="text-sm font-medium text-gray-500 mb-1">Affected Groups Consultation Steps</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.affected_groups_consultation_steps|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Fallback & Opt-Out -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Fallback & Opt-Out Mechanisms</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Fallback and Escalation Process</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.has_fallback_and_escalation_process|markdown|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Opt-Out Mechanism</dt>
                        <dd class="text-base text-gray-900 prose max-w-none">{{ ai_use_case.has_opt_out_mechanism|markdown|default:"—" }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Contact Information</h2>
            </div>
            <div class="px-6 py-6">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Contact Name</dt>
                        <dd class="text-base text-gray-900">{{ ai_use_case.contact_name|default:"—" }}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500 mb-1">Contact Email</dt>
                        <dd class="text-base text-gray-900">
                            {%if ai_use_case.contact_email %}
                                <a href="mailto:{{ ai_use_case.contact_email }}" class="text-violet-600 hover:text-violet-800">{{ ai_use_case.contact_email }}</a>
                            {%else %}—{%endif %}
                        </dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Related Hallucinations -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Related Hallucinations</h2>
            </div>
            <div class="px-6 py-6">
                {%if hallucinations %}
                <ul class="divide-y divide-gray-200">
                    {%for item in hallucinations %}
                    <li class="py-3"><a href="{%url 'ai_hallucination_detail' model_id=item.id %}" class="text-violet-600 hover:text-violet-800">{{ item }}</a></li>
                    {%endfor %}
                </ul>
                {%else %}
                <p class="text-gray-500">No related items</p>
                {%endif %}
            </div>
        </div>
    </div>
</div>

<script>
function confirmDelete() {
    if (confirm('Are you sure you want to delete this ai use case?')) {
        window.location.href = "{%url 'ai_use_case_delete' model_id=ai_use_case.id %}";
    }
}
</script>
{%endblock %}
